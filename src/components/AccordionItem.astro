---
/**
 * AccordionItem - Expandable details section
 * Uses native <details> element for accessibility
 */
interface Props {
  icon: string;
  title: string;
  iconColor?: string;
  defaultOpen?: boolean;
}

const {
  icon,
  title,
  iconColor = 'text-(--color-primary)',
  defaultOpen = false
} = Astro.props;
---

<details
  class="accordion group rounded-xl bg-(--color-surface-subtle) overflow-hidden transition-all"
  open={defaultOpen}
>
  <summary class="flex cursor-pointer items-center justify-between gap-4 px-5 py-4 select-none hover:bg-(--color-surface-hover) transition-colors">
    <div class="flex items-center gap-3">
      <span class:list={['material-symbols-outlined', iconColor]}>{icon}</span>
      <span class="text-base font-bold text-(--color-text)">{title}</span>
    </div>
    <span class="material-symbols-outlined text-(--color-text-secondary) group-open:rotate-180 transition-transform duration-300">
      expand_more
    </span>
  </summary>

  <div class="accordion-content px-5 pb-5 pt-2 border-t border-(--color-separator)">
    <slot />
  </div>
</details>

<style>
  details > summary {
    list-style: none;
  }

  details > summary::-webkit-details-marker {
    display: none;
  }

  .accordion-content {
    animation: fadeIn 0.2s ease-out;
  }

  @keyframes fadeIn {
    from {
      opacity: 0;
      transform: translateY(-8px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
</style>
